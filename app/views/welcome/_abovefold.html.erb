<link href="https://fonts.googleapis.com/css?family=Catamaran:600" rel="stylesheet">

<style>
@font-face {
  font-family: 'Headliner';
  /*src:url('icomoon.eot');
  src:url('icomoon.eot?#iefix') format('embedded-opentype'),
    url('icomoon.svg#icomoon') format('svg'),
    url('icomoon.woff') format('woff'),*/
    url('headliner.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

.TickerNews {
  width: 100%;
  height: 50px;
  line-height: 50px;
}

.ti_wrapper {
  width: 100%;
  position: relative;
  overflow: hidden;
  height: 50px;
}

.ti_slide {
  width: 30000px;
  position: relative;
  left: 0;
  top: 0;
}

.ti_content {
  width: 8000px;
  position: relative;
  float: left;
}

.ti_news { float: left; }

.marquee {
  width: 100%;
  overflow: hidden;
  border: 1px solid #ccc;
  background: #020202;
  font-size:18px;
  margin-bottom:5px;
}
.marquee a {
  color:#F4F3C7;
}

li {
  display: inline;
}
</style>

<script type='text/javascript' src='//cdn.jsdelivr.net/jquery.marquee/1.4.0/jquery.marquee.min.js'></script>

<div class="row style1">
  <div class="col-md-12">
    <p class="col-md-4 site text-left" style ='font-family: "Catamaran"'>
    <br>
      <%= Time.now.strftime('%B %d, %Y') %>
    </p>
    <p class="col-md-4 site text-left" style ='font-family: "Catamaran"'>
      <br>
      Today's Articles:
      <%= @cnns.past_day.all.count + @drudges.past_day.all.count %>
    </p>
    <!-- <div class="col-md-1 site text-left" style ='font-family: "Catamaran";
    '>
    <br>
        <span>Email</span>
      </div>
      <div class="col-md-3 site text-left"><br>
        <input type="text" name="email" style="background-color: white;
        height: 35px;
        color: black;
        width:100%;">

    </div> -->

    <div class="marquee">
      <%@nytimes.past_day.all.each do |a|%>
      <a href='<%=a.url%>'><%=a.title.upcase.truncate_words(20, omission: '...') rescue nil%>
      </a>
      <%end%>
    </div>

    <script>
    $('.marquee').marquee({
      //speed in milliseconds of the marquee
      duration: 15000,
      startVisible: true,
      pauseOnHover: false
    });
    </script>

      <% @newsweeks.past_day.first(1).each do |a| %>
      <div class='col-md-8'>
      <a href='<%=a.url%>'>
        <div class="image" style=' width: 100%;
        height: 450px;
    overflow: hidden;'>
         <img src="<%=a.image rescue nil%>" style="
         width: 100%;
    height: 550px;
    margin: -75px 0px 0px 00px;">
         <h2 class="headline_text" style="width: 400px">
           <span style="color: #FFCE00;
                          text-align:center;
                          letter-spacing: -1px;
                          background: rgb(0, 0, 0); /* fallback color */
                          background: rgba(0, 0, 0, 0.7);">
             <%=a.title.truncate_words(20, omission: '...') rescue nil%>
             <img src='https://s-media-cache-ak0.pinimg.com/originals/1c/e2/be/1ce2be6b9943ca34f16d919ce3059f83.jpg' style="width:100px">
           </span>
         </h2>
       </div> </a>
           </div>
      <% end %>


<ul class="newsticker col-md-4" >
  <li class="col-md-12" style="background:url('http://assets.nydailynews.com/polopoly_fs/1.52009.1313770405!/img/httpImage/image.jpg_gen/derivatives/gallery_1200/gal-prohibition17-web-jpg.jpg');  background-size:     cover;                      /* <------ */
  background-repeat:   no-repeat;
  background-position: 0% 0%;height:150px;padding-top: 35px;text-align:center; border:2px solid red">

      <% @nytimes.past_day[1..1].each do |a| %>
      <a href='<%=a.url%>'>  <span style="margin-top: 10px; font-size:1.5em; height:1px; text-align:center; color: #FFCE00;
                     text-align:center;
                     letter-spacing: -1px;
                     background: rgb(0, 0, 0); /* fallback color */
                     background: rgba(0, 0, 0, 0.7);"><%= a.title %></span>
                     <img src='https://upload.wikimedia.org/wikipedia/commons/7/77/The_New_York_Times_logo.png'
                           style='width:135px; margin-top:0px'> </a>
      <% end %>

  </li>
  <li class="col-md-12" style="background:url('http://assets.nydailynews.com/polopoly_fs/1.52009.1313770405!/img/httpImage/image.jpg_gen/derivatives/gallery_1200/gal-prohibition17-web-jpg.jpg');  background-size:     cover;                      /* <------ */
  background-repeat:   no-repeat;
  background-position: 0% 0%;height:150px;padding-top: 35px;text-align:center; border:2px solid green">
  <% @foxnews.past_day.first(1).each do |a| %>
  <a href='<%=a.url%>'>  <span style="margin-top: 10px; font-size:1.5em; height:1px; color: #FFCE00;
                 text-align:center;
                 letter-spacing: -1px;
                 background: rgb(0, 0, 0); /* fallback color */
                 background: rgba(0, 0, 0, 0.7);"><%= a.title %>              <img src='http://commonwealthmagazine.org/wp-content/uploads/sites/2/2015/12/fox-news-logo.png'
                       style='width:45px; '>
               </span>
               </a>
  <% end %>

  </li>
  <li class="col-md-12" style="background:url('http://assets.nydailynews.com/polopoly_fs/1.52009.1313770405!/img/httpImage/image.jpg_gen/derivatives/gallery_1200/gal-prohibition17-web-jpg.jpg');  background-size:     cover;                      /* <------ */
  background-repeat:   no-repeat;
  background-position: 0% 0%;height:150px;padding-top: 35px;text-align:center; border:2px solid blue">

      <% @buzzfeeds.past_day.last(1).each do |a| %>
      <a href='<%=a.url%>'>  <span style="margin-top: 10px; font-size:1.5em; height:1px; color: #FFCE00;
                     text-align:center;
                     letter-spacing: -1px;
                     background: rgb(0, 0, 0); /* fallback color */
                     background: rgba(0, 0, 0, 0.7);"><%= a.title %>         <img src='https://upload.wikimedia.org/wikipedia/commons/e/e4/BuzzFeed.svg'
                              style='width:105px;'>
                   </span>
                   </a>
      <% end %>

  </li>

  <li class="col-md-12" style="background:url('http://assets.nydailynews.com/polopoly_fs/1.52009.1313770405!/img/httpImage/image.jpg_gen/derivatives/gallery_1200/gal-prohibition17-web-jpg.jpg');  background-size:     cover;                      /* <------ */
  background-repeat:   no-repeat;
  background-position: 0% 0%;height:150px;padding-top: 35px;text-align:center; border:2px solid blue">

      <% @buzzfeeds.past_day.last(1).each do |a| %>
      <a href='<%=a.url%>'>  <span style="margin-top: 10px; font-size:1.5em; height:1px; color: #FFCE00;
                     text-align:center;
                     letter-spacing: -1px;
                     background: rgb(0, 0, 0); /* fallback color */
                     background: rgba(0, 0, 0, 0.7);"><%= a.title %>         <img src='https://upload.wikimedia.org/wikipedia/commons/e/e4/BuzzFeed.svg'
                              style='width:105px;'>
                   </span>
                   </a>
      <% end %>

  </li>
  </ul>

    <p style="font-size:.9em; text-align:center">

      <% @mediums.past_day.last(1).each do |a| %>
      <a href='<%=a.url%>'>  <span style="font-size:.8em; height:1px;"><%= a.title %></span> </a> |
      <% end %>

      <% @economists.past_day.last(1).each do |a| %>
      <a href='<%=a.url%>'>  <span style="font-size:.8em; height:1px;"><%= a.title %></span> </a> |
      <% end %>
      <% @reddits.past_day.last(1).each do |a| %>
      <a href='<%=a.url%>'>  <span style="font-size:.8em; height:1px;"><%= a.title %></span> </a> |
      <% end %>
    </p>
  </div>
</div>

<script>
(function($, window, document, undefined) {
    'use strict';
    var pluginName = 'newsTicker',
            defaults = {
                    row_height: 150,
                    max_rows: 3,
                    speed: 1000,
                    duration: 5500,
                    direction: 'up',
                    autostart: 1,
                    pauseOnHover: 1,
                    nextButton: null,
                    prevButton: null,
                    startButton: null,
                    stopButton: null,
                    hasMoved: function() {},
                    movingUp: function() {},
                    movingDown: function() {},
                    start: function() {},
                    stop: function() {},
                    pause: function() {},
                    unpause: function() {}
            };

    function Plugin(element, options) {
            this.element = element;
            this.$el = $(element);
            this.options = $.extend({}, defaults, options);
            this._defaults = defaults;
            this._name = pluginName;
            this.moveInterval;
            this.state = 0;
            this.paused = 0;
            this.moving = 0;
            if (this.$el.is('ul, ol')) {
                    this.init();
            }
    }

    Plugin.prototype = {
            init: function() {
                    this.$el.height(this.options.row_height * this.options.max_rows)
                            .css({overflow : 'hidden'});

                    this.checkSpeed();

                    if(this.options.nextButton && typeof(this.options.nextButton[0]) !== 'undefined')
                            this.options.nextButton.click(function(e) {
                                    this.moveNext();
                                    this.resetInterval();
                            }.bind(this));
                    if(this.options.prevButton && typeof(this.options.prevButton[0]) !== 'undefined')
                            this.options.prevButton.click(function(e) {
                                    this.movePrev();
                                    this.resetInterval();
                            }.bind(this));
                    if(this.options.stopButton && typeof(this.options.stopButton[0]) !== 'undefined')
                            this.options.stopButton.click(function(e) {
                                    this.stop()
                            }.bind(this));
                    if(this.options.startButton && typeof(this.options.startButton[0]) !== 'undefined')
                            this.options.startButton.click(function(e) {
                                    this.start()
                            }.bind(this));

                    if(this.options.pauseOnHover) {
                            this.$el.hover(function() {
                                    if (this.state)
                                            this.pause();
                            }.bind(this), function() {
                                    if (this.state)
                                            this.unpause();
                            }.bind(this));
                    }

                    if(this.options.autostart)
                            this.start();
            },

            start: function() {
                    if (!this.state) {
                            this.state = 1;
                            this.resetInterval();
                            this.options.start();
                    }
            },

            stop: function() {
                    if (this.state) {
                            clearInterval(this.moveInterval);
                            this.state = 0;
                            this.options.stop();
                    }
            },

            resetInterval: function() {
                    if (this.state) {
                            clearInterval(this.moveInterval);
                            this.moveInterval = setInterval(function() {this.move()}.bind(this), this.options.duration);
                    }
            },

            move: function() {
                     if (!this.paused) this.moveNext();
            },

            moveNext: function() {
                    if (this.options.direction === 'down')
                            this.moveDown();
                    else if (this.options.direction === 'up')
                            this.moveUp();
            },

            movePrev: function() {
                    if (this.options.direction === 'down')
                            this.moveUp();
                    else if (this.options.direction === 'up')
                            this.moveDown();
            },

            pause: function() {
                    if (!this.paused) this.paused = 1;
                    this.options.pause();
            },

            unpause: function() {
                    if (this.paused) this.paused = 0;
                    this.options.unpause();
            },

            moveDown: function() {
                    if (!this.moving) {
                            this.moving = 1;
                            this.options.movingDown();
                            this.$el.children('li:last').detach().prependTo(this.$el).css('marginTop', '-' + this.options.row_height + 'px')
                                    .animate({marginTop: '0px'}, this.options.speed, function(){
                                            this.moving = 0;
                                            this.options.hasMoved();
                                    }.bind(this));
                    }
            },

            moveUp: function() {
                    if (!this.moving) {
                            this.moving = 1;
                            this.options.movingUp();
                            var element = this.$el.children('li:first');
                            element.animate({marginTop: '-' + this.options.row_height + 'px'}, this.options.speed,
                                    function(){
                                            element.detach().css('marginTop', '0').appendTo(this.$el);
                                            this.moving = 0;
                                            this.options.hasMoved();
                                    }.bind(this));
                    }
            },

            updateOption: function(option, value) {
                    if (typeof(this.options[option]) !== 'undefined'){
                            this.options[option] = value;
                            if (option == 'duration' || option == 'speed'){
                                this.checkSpeed();
                                this.resetInterval();
                            }
                    }
            },

            add: function(content){
                this.$el.append($('<li>').html(content));
            },

            getState: function() {
                    if (paused) return 2 // 2 = paused
                    else return this.state;// 0 = stopped, 1 = started
            },

            checkSpeed: function() {
                    if (this.options.duration < (this.options.speed + 25))
                            this.options.speed = this.options.duration - 25;
            },

            destroy: function() {
                    this._destroy(); // or this.delete; depends on jQuery version
            }
    };

    $.fn[pluginName] = function(option) {
            var args = arguments;

            return this.each(function() {
                    var $this = $(this),
                            data = $.data(this, 'plugin_' + pluginName),
                            options = typeof option === 'object' && option;
                    if (!data) {
                            $this.data('plugin_' + pluginName, (data = new Plugin(this, options)));
                    }
                    // if first argument is a string, call silimarly named function
                    if (typeof option === 'string') {
                            data[option].apply(data, Array.prototype.slice.call(args, 1));
                    }
            });
    };
})(jQuery, window, document);
</script>

<script>
$('.newsticker').newsTicker();
</script>
